<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<link href="https://fonts.googleapis.com/css2?family=Lato:ital@1&family=Luckiest+Guy&family=Merriweather:wght@900&family=Recursive:wght@500&family=Rowdies:wght@300&family=Ubuntu&display=swap" rel="stylesheet">
  <style>

@import url('https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Merriweather:wght@900&family=Recursive:wght@500&family=Rowdies:wght@300&family=Ubuntu&display=swap');
</style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Merriweather:wght@900&family=Recursive:wght@500&family=Rowdies:wght@300&family=Ubuntu&display=swap" rel="stylesheet">

<style >
.desc{
  color:purple;
}
.demo{
  font-family: 'Rowdies', cursive;
}
.toddler{


  font-family: 'Rowdies', cursive;
  background: -webkit-linear-gradient(#0ca87b, #0ea1a1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
/* color: #452173; */

  margin-bottom: 60px;
  font-size: 3rem;
    font-weight: bold;
}
.desc1{
  color:purple;
  font-size: 2rem;
  font-weight: bold;
}
.navbar-toggle {
    margin-right: -12.5%;
}

/* html, body, div, iframe
{
margin: 0px;
padding: 0px;
height: 100%;
border: none;
} */
</style>


  <meta charset="utf-8">
  <title>Lil'Learn</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="/css/home.css">

  <link rel="icon" href="https://docs.google.com/uc?id=1T2q0QcgrB5lJ6wqd-jYW4HAWr5YeXasA">
  <!-- CSS only -->
  <script src="https://kit.fontawesome.com/433f1b34e2.js" crossorigin="anonymous"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@1,800&family=Ubuntu:wght@700&display=swap" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">


</head>

<body>


  <header>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-dark ">


      <a style="margin-left:65px; font-size:30px;" class="navclass navbar-brand " href="/"><img class="logo1" src="https://i.imgur.com/nmkZOyJ.png" alt="">Lil'Learn</a>
      <button class="navbar-toggler" style="margin-right:10%;" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" style="margin-left:10%;" id="navbarCollapse">
        <ul class="navbar-nav me-auto" >
          
        </ul>
        <ul class="navbar-nav ms-auto" style="margin-right:7%; ">




          


          <li class="nav-item">
            <a style=" font-weight: bold; color: grey; " class="nav-link" href="/login">Dashboard</a>
          </li>
          <li class="nav-item">
            <a style="color:white;font-weight: bold;" class="nav-link" href="/signup">Sign Out </a>
          </li>


</ul>
      </div>
    </nav>
  </header>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<body>
<div style="margin-top: 100px;"></div>
<input type="text" hidden value="<%= p %>" id="plist" />
<label for="">Select the class</label>
<select id="classVal"  onchange="myFunction()" name="" >
 <% cl.forEach(c=>{ %>
    <option  value="<%= c %>"> <%= c %> </option>
    <h1><%= c %></h1>
   <% }) %>

</select>







<canvas id="myChart" style="width:100%;max-width:600px"></canvas>

<script>
  var db=document.getElementById("plist").value;
db=JSON.parse(db);
var classVal=document.getElementById("classVal").value;
var total_marks=[];
var no_of_students=[];
db.forEach(s => {
  if(s.class===classVal){
    var mr=s.marks;
    console.log(s.studentID);
    for(var i=0;i<mr.length;i++){
      var val=0;
      for(var j=0;j<mr[i].length;j++){
        val+=mr[i][j];
      }
      if(i < total_marks.length){
        total_marks[i]+=val;
        no_of_students[i]+=1;
      }else{
        total_marks.push(val);
        no_of_students.push(1);
      }
      
    }
  }
});
// console.log(total_marks);
// console.log( no_of_students);
var basis=[];
var ratio=[];
for(var i=0;i<total_marks.length;i++){
  ratio.push(parseFloat((total_marks[i]/no_of_students[i]).toFixed(2)));
  basis.push(i+1);
}
// console.log(ratio);
// console.log(basis);

// var xValues = [50,60,70,80,90,100,110,120,130,140,150];
// var yValues = [7,8,8,9,9,9,10,11,14,14,15];
var xValues=basis;
var yValues=ratio;
new Chart("myChart", {
  type: "line",
  data: {
    labels: xValues,
    datasets: [{
      fill: false,
      lineTension: 0,
      backgroundColor: "rgba(0,0,255,1.0)",
      borderColor: "rgba(0,0,255,0.1)",
      data: yValues
    }]
  },
  options: {
    legend: {display: false},
    scales: {
      yAxes: [{ticks: {min: 0, max:20}}],
    }
  }
});


  var cl=document.getElementById("classVal");
  function myFunction(){
    console.log(cl.value);
    var db=document.getElementById("plist").value;
    db=JSON.parse(db);
    var classVal=cl.value;
    var total_marks=[];
    var no_of_students=[];
    db.forEach(s => {
      if(s.class===classVal){
        var mr=s.marks;
        // console.log(s.studentID);
        for(var i=0;i<mr.length;i++){
          var val=0;
          for(var j=0;j<mr[i].length;j++){
            val+=mr[i][j];
          }
          if(i < total_marks.length){
            total_marks[i]+=val;
            no_of_students[i]+=1;
          }else{
            total_marks.push(val);
            no_of_students.push(1);
          }
          
        }
      }
    });
    console.log(total_marks);
    console.log( no_of_students);
    var basis=[];
    var ratio=[];
    for(var i=0;i<total_marks.length;i++){
      ratio.push(parseFloat((total_marks[i]/no_of_students[i]).toFixed(2)));
      basis.push(i+1);
    }
    console.log(ratio);
    console.log(basis);

    // var xValues = [50,60,70,80,90,100,110,120,130,140,150];
    // var yValues = [7,8,8,9,9,9,10,11,14,14,15];
    var xValues=basis;
    var yValues=ratio;
    new Chart("myChart", {
      type: "line",
      data: {
        labels: xValues,
        datasets: [{
          fill: false,
          lineTension: 0,
          backgroundColor: "rgba(0,0,255,1.0)",
          borderColor: "rgba(0,0,255,0.1)",
          data: yValues
        }]
      },
      options: {
        legend: {display: false},
        scales: {
          yAxes: [{ticks: {min: 0, max:20}}],
        }
      }
    });
  }
</script>
  <div class="row">
    <div class="col-md-12 col-sm-12 col-lg-6">


  <div class="container contact-form">
    <div class="contact-image">
      <img class="rocket" src="https://docs.google.com/uc?id=1k4iZUhb1QL0mSBr3E903xBENzXG27Mmc" alt="rocket_contact" />
    </div>
    <form method="post" action="https://formsubmit.co/lillearn.13@gmail.com">
      <h3>Inform to Parents</h3>
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <input type="text" name="txtName" class="form-control" placeholder="Student Name " value="" /><br>
          </div>
          <div class="form-group">
            <input type="text" name="txtEmail" class="form-control" placeholder="Student Roll No. " value="" /><br>
          </div>
         

        </div>
        <div class="col-md-6">
          <div class="form-group">
            <textarea name="txtMsg" class="form-control" placeholder="Remakrs" style="width: 100%; height: 120px;"></textarea>
          </div>
        </div>


            <div class="col-md-6 col-sm-6">
              <input type="hidden" name="_next" value="https://www.lillearn.com/thankyou">
              <input class="dp" type="submit" name="btnSubmit" class="btnContact" value="Send Message" />
            </div>


      </div>
    </form>
  </div>
</div>
</div>


 

</body>

</html>